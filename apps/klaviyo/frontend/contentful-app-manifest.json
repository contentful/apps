{
  "name": "Klaviyo",
  "description": "Sync your Contentful content with Klaviyo",
  "id": "klaviyo",
  "category": "Marketing",
  "version": "0.1.0",
  "locations": [
    {
      "location": "app-config",
      "component": "ConfigScreen"
    },
    {
      "location": "entry-sidebar",
      "component": "Sidebar"
    },
    {
      "location": "entry-field",
      "component": "Field"
    },
    {
      "location": "dialog",
      "component": "FieldSelectDialog"
    },
    {
      "location": "page",
      "component": "FieldMappingScreen"
    }
  ],
  "parameters": {
    "installation": [
      {
        "id": "klaviyoClientId",
        "name": "Klaviyo OAuth Client ID",
        "description": "Your Klaviyo OAuth app client ID",
        "type": "Symbol",
        "required": true
      },
      {
        "id": "klaviyoClientSecret",
        "name": "Klaviyo OAuth Client Secret",
        "description": "Your Klaviyo OAuth app client secret",
        "type": "Symbol",
        "required": true
      },
      {
        "id": "klaviyoRedirectUri",
        "name": "Klaviyo OAuth Redirect URI",
        "description": "The redirect URI registered with your Klaviyo OAuth app",
        "type": "Symbol",
        "required": true
      }
    ]
  },
  "functions": [
    {
      "id": "klaviyoEntrySync",
      "name": "Klaviyo Entry Sync",
      "description": "Automatically syncs Contentful entries to Klaviyo on publish/update",
      "path": "functions/entry-sync-function.js",
      "entryFile": "functions/entry-sync-function.ts",
      "allowNetworks": ["a.klaviyo.com"],
      "accepts": ["appevent.handler"]
    }
  ],
  "appEventHandlers": [
    {
      "functionId": "klaviyoEntrySync",
      "name": "Auto-sync to Klaviyo",
      "description": "Automatically syncs content to Klaviyo when entries are published or updated",
      "topics": ["ContentManagement.Entry.publish", "ContentManagement.Entry.auto_save", "ContentManagement.Entry.save"]
    }
  ]
} 